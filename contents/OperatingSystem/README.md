# 💽 Operating System (운영체제)

###### content
- [운영체제(OS)란?](#운영체제란) 
- [프로세스](#프로세스)  
- [스레드](#스레드)  
<br>
<br>
<br>

---
## 운영체제란?

### ■ 운영체제(OS)의 정의
- 사용자가 컴퓨터를 쉽게 다룰 수 있게 해주는 인터페이스
- 컴퓨터 자원을 효율적으로 관리하기 위한 시스템
- 컴퓨터 사용자와 컴퓨터 하드웨어 간의 인터페이스로서 동작하는 시스템 소프트웨어의 일종
- 컴퓨터 응용 프로그램 관리자
- 하드웨어와 소프트웨어를 관리하는 소프트웨어 전체  
- Windows(윈도우), Linux(리눅스), UNIX(유닉스), Mas OS 등
<br>
<br>

💡 **소프트웨어(Softmware)**  
- 크게 시스템 소프트웨어(OS)와 응용 소프트웨어(서드파티 앱)
- 시스템 소프트웨어는 자체적으로 구동 가능
- 응용 소프트웨어는 시스템 소프트웨어 없이 구동 불가  
<br>

💡 **펌웨어(Firmware)**  
- 특정 하드웨어 장치에 포함된 소프트웨어
- 전자기기 등의 기본적인 제어 및 구동을 맡는 소프트웨어
- 프로그램의 형태를 갖추고 있으므로 기능적으로는 소프트웨어에 가깝지만 하드웨어 내부(주로 ROM)에 위치하며, 사용자가 쉽게 그 내용을 바꿀 수 없으므로 하드웨어적인 특성도 함께 가지고 있음
- 펨웨어 예 : 바이오스(BIOS), 스마트폰 등등  
<br>
<br>

### ■ 운영체제의 기능  
#### 1. 자원 관리  
  - 메모리 관리
  - 프로세스 관리
  - 입출력 장치 관리
  - 파일 관리  
<br>
    
#### 2. 시스템 관리
  - 시스템 보호
  - 네트워킹
  - 명령 해석기  
<br>

<details>
  <summary>상세기능</summary>
  <div markdown="1">
    <ul>
      <li>프로세서, 기억장치, 입출력장치, 파일 및 정보 등의 자원을 관리한다.</li>
      <li>자원을 효율적으로 관리하기 위해 자원의 스케줄링 기능을 제공한다.</li>
      <li>사용자와 시스템간의 편리한 인터페이스를 제공한다.</li>
      <li>시스템의 각종 하드웨어와 네트워크를 관리, 제어한다.</li>
      <li>데이터를 관리하고, 데이터 및 자원의 공유 기능을 제공한다.</li>
      <li>시스템의 오류를 검사하고 복구한다.</li>
      <li>자원 보호 기능을 제공한다.</li>
      <li>입출력에 대한 보조 기능을 제공한다.</li>
      <li>가상 계산기 능력을 제공한다.  </li>
    </ul>
  </div>
</details>

<br>
<br>
<br>


### 함께 보면 좋은 자료
[🔗 [블로그] Rebro의 코딩 일기장 - [운영체제(OS)] 1. Overview](https://rebro.kr/170?category=504670)  
[🔗 [유튜브] 얄팍한 코딩사전 - 프로세스는 뭐고 스레드는 뭔가요?](https://youtu.be/iks_Xb9DtTM)  
[🔗 [유튜브] 기술노트with알렉 - 컴퓨터구조 운영체제 클라우드 안쉬고 처음부터 끝까지 30분동안 설명하기](https://youtu.be/uMyKBYF48nY)  
<br>


##### [🔼 목차로 이동](#content)
---
## 프로세스

### ■ 프로세스(Process) 란?
- 실행 중인 프로그램
- 디스크에 있는 프로그램이 메모리에 로드되면 프로세스가 됨
- 하나의 프로그램이 여러 프로세스가 될 수 있음
- 디스크로부터 메모리에 적재되어 CPU의 할당을 받을 수 있는 것
- 스택(Stack), 힙(Heap), 데이터(Data), 코드(Code)로 나뉨  
<br>

### ■ 프로세스 컨텍스트(Process Context)
```프로세스의 특정 시점의 정확한 상태를 나타내기 위한 정보```

프로세스의 실행은 Program Counter(PC)가 프로세스의 Code를 가리키면서 명령어를 하나씩 읽고, CPU에 가져와서 Register에 값을 넣고, 산술논리연산 장치에서 연산을 하고, 결과를 Register나 프로세스의 메모리에 저장한다.  

이러한 프로세스의 특정 시점의 정확한 상태를 나타내기 위한 정보. 즉, 프로세스가 현재 어떤 상태에서 수행되고 있는지 정확히 규명하기 위해 필요한 정보를 프로세스 컨텍스트라고 한다.  

프로세스는 Time-Sharing방식으로 진행되기 때문에 각 프로세스의 컨텍스트를 알아야 실행이 멈췄다 다시 진행될 때 바로 이어서 실행이 가능하다.

프로세스 컨텍스트는 아래 4가지를 포함한다.

#### 1. 하드웨어 컨텍스트(Hardware Context)  
  - CPU의 수행상태를 나타낸다.
  - 프로그램 카운터(Program Counter), 각종 레지스터(Register)가 있다.  
  - 이들을 이용하여 해당 프로세스가 어디까지 실행되었는지를 알 수 있다.  

#### 2. 프로세스의 주소 공간(Address space)
  - 현재 시점의 프로세스의 code, data, stack에 어떤 값이 들어있는지 알 수 있다.

#### 3. 프로세스 관련 커널 자료구조 PCB(Process Control Block)
  - 운영체제가 각 프로세스를 관리하기 위해 프로세스별로 보유하고 있는 자신의 정보 묶음이다.
  - 운영체제는 프로세스가 시작할 때마다 자신의 data영역에 해당 프로세스의 제어 블록을 가진다.

#### 4. 프로세스 커널 스택(Process Kernel Stack)
  - 프로세스가 자신이 처리할 수 없는 일을 운영체제에 요청할 수 있다.
  - 시스템 콜이 발생하면 PC는 커널의 code를 가리키고 커널의 함수를 호출한다. 이 때, 각 프로세스마다 호출하는 code를 관리하기 위해 프로세스 별 커널 스택을 갖는다.  
<br>

<img src="../../resources/os_process.png" width="80%">  

###### 이미지 출처 : https://rebro.kr/172?category=504670

<br>
<br>

### ■ 프로세스 상태(Process State)  

<img src="../../resources/process_state.png" width="80%">  

###### 이미지 출처 : https://rebro.kr/172?category=504670

- New : 프로세스가 생성되기 위해 준비 된 상태 (아직 보조 메모리에 프로그램 형태로 존재)
- Ready : 메인 메모리에 적재되어 프로세스에 의해 실행되기를 대기하는 상태 (이 상태의 프로세스는 운영체제의 대기 큐에 존재)
- Running : 프로세스가 할당되어 CPU를 잡고 명령을 수행 중인 상태
- Waiting : 프로세스가 어떠한 이벤트가 발생하기를 기다리는 상태 (CPU를 할당해도 당장 명령을 수행할 수 없는 상태)
- Terminated : 프로세스가 실행을 마친 상태 (프로세스 제어 블록이 삭제된다)

<br>
<br>

### ■ 프로세스 제어 블록(Process Control Block - PCB)  
```특정한 프로세스를 관리할 필요가 있는 정보를 포함하는 운영 체제 커널의 자료 구조```

운영체제가 프로세스를 다룰 때 프로세스 제어 블록을 이용해서 다루게 된다. 커널의 주소 공간에 있으며 다음의 구성 요소를 갖는다. 

#### 1. 운영체제가 관리상 사용하는 정보
- Process state : 프로세스의 상태
- Process ID
- Scheduling information : 프로세스의 중요도, 스케줄링 큐 포인터 등 스케줄링 파라미터 정보
- Priority : 프로세스의 우선순위
 
#### 2. CPU 수행 관련 하드웨어 값
- Program counter : 해당 프로세스가 이어서 실행해야 할 명령의 주소를 가리키는 포인터
- Register : 프로세스가 인터럽트 이후 올바르게 작업을 이어가기 위해 참조하는 CPU 레지스터 값
 
#### 3. 메모리 관련
- Code, Data, Stack의 위치 정보, base/limit 레지스터 값
 
#### 4. 파일 관련
- open file descriptors : 열린 파일 목록


<br>
<br>
<br>

### 함께 보면 좋은 자료
[🔗 [강의] KOCW - 운영체제](http://www.kocw.net/home/cview.do?cid=3646706b4347ef09#.Y1ls9fqJizU.link)  
[🔗 [유튜브] 주니온TV 아무거나연구소 - 운영체제: 03. 프로세스의 이해](https://youtu.be/Hgr6oGlDK_E)  

### Reference
[🔗 [블로그] Rebro의 코딩 일기장 - [운영체제(OS)] 3. 프로세스(Process)](https://rebro.kr/172?category=504670)  
[🔗 [블로그] 구름 개발일기장 - 3주차.Process 정리](https://ws-pace.tistory.com/20)  
<br>

##### [🔼 목차로 이동](#content)
---
## 스레드

### ■ 스레드(Thread) 란?
- 프로세스 안에서 실행되는 여러 흐름 단위
- CPU 수행의 기본 단위 또는 프로세스 안의 제어권의 흐름
- 한 개의 프로세스 내의 반드시 하나 이상의 스레드가 존재
- Thread ID, Program counter, Register set, Stack space로 구성
- 각각의 스레드는 주로 최소한 자신의 레지스터 상태와 스택을 가짐
- Code, Data 섹션, 운영체제 자원들은 스레드끼리 공유 가능

<img src="../../resources/os_thread.png" width="80%">  

###### 이미지 출처 : https://rebro.kr/172?category=504670

<br>

### ■ 스레드 종류

#### 싱글 스레드(Single thread)  
: 한 프로세스가 하나의 스레드를 이용하여 한 번에 한 작업만 수행

#### 멀티 스레드(Multi thread)  
: 한 프로세스가 여러 스레드로 동시에 여러 작업을 수행

<br>

### ■ 스레드의 필요성

프로세스 내의 스레드는 모두 각각 독립적인 실행 파일이며, 모든 스레드는 프로세스의 일부이다.  

여러개의 작업 단위로 구성된 프로그램에서 요청을 동시에 처리하기 위함이다.  

프로세스를 여러 개 수행해도 되지만 스레드를 사용하는 이유는
 
1. 프로세스를 생성하거나 Context switching 하는 작업은 너무 무겁고 잦으면 성능 저하가 발생하는데 스레드를 생성하거나 switching 하는 것은 그에 비해 가볍다. 

2. 두 프로세스가 하나의 데이터를 공유하려면 메시지 패싱이나 공유 메모리 또는 파이프를 사용해야 하는데 이는 효율이 떨어지고 개발자가 구현, 관리하기 번거롭다.

<br>

### ■ 스레드의 이점

#### 1. 응답성 (Responsiveness)
다른 스레드의 실행 시간이 길거나 입출력 요청으로 인해 block되더라도 계속 실행되는 것을 허용한다.

#### 2. 자원 공유(Resource sharing)
프로세스 내 자원(데이터, 코드, 힙)을 공유한다.

#### 3. 경제성 (Economy)
프로세스 생성을 위한 메모리와 자원 할당, 프로세스 간 문맥 교환(Context Switch)은 비용이 많이 들고 오버헤드가 발생한다. 반면, 스레드는 프로세스의 자원을 공유하고 있으므로 스레드 생성이나 문맥 교환 시 더 경제적이다.

#### 4. 확장성 (Scalability)
멀티 프로세서 구조에서는 스레드들이 각자 다른 프로세서 위에서 병렬적으로 실행되기 때문에 다중 CPU환경에서 병렬성이 크게 증가한다.

<br>
<br>
<br>

### 함께 보면 좋은 자료
[🔗 [블로그] Rebro의 코딩 일기장 - [운영체제(OS)] 4. 멀티쓰레드](https://rebro.kr/174?category=504670)  
[🔗 [Github] gyoogle - tech-interview-for-developer](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Process%20vs%20Thread.md)  
 

##### [🔼 목차로 이동](#content)
---